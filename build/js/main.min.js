var s,Accordions={settings:{accordions:$(".js-accordion"),panels:$(".js-accordion dd"),titles:$(".js-accordion dt"),firstTitle:$(".js-accordion dt").first(),lastTitle:$(".js-accordion dt").last(),keys:{enter:13,space:32,end:35,home:36,left:37,up:38,right:39,down:40}},init:function(){s=this.settings,this.bindUiActions(),s.titles.attr({"aria-selected":"false","aria-expanded":"false"}),s.panels.addClass("hide").attr("aria-hidden","true")},bindUiActions:function(){Accordions.click(),Accordions.keyDown()},click:function(){s.titles.on("click",function(){Accordions.toggle($(this)),Accordions.focusedTitle($(this))}).on("selectstart",function(a){a.preventDefault()})},keyDown:function(){s.titles.on("keydown",function(a){switch(!0){case a.which===s.keys.enter:Accordions.toggle($(this));break;case a.which===s.keys.space:Accordions.toggle($(this));break;case a.which===s.keys.right:Accordions.nextTab($(this));break;case a.which===s.keys.down:Accordions.nextTab($(this));break;case a.which===s.keys.left:Accordions.previousTab($(this));break;case a.which===s.keys.up:Accordions.previousTab($(this));break;case a.which===s.keys.home:Accordions.firstTab($(this));break;case a.which===s.keys.end:Accordions.lastTab($(this))}}),s.panels.on("keydown",function(a){switch(!0){case a.which===s.keys.up&&a.ctrlKey:Accordions.parentTitle($(this))}})},show:function(a){a.removeClass("hide").attr("aria-hidden","false")},hide:function(a){a.addClass("hide").attr("aria-hidden","true")},toggle:function(a){var b=a,c=a.next();c.hasClass("hide")?(Accordions.show(c),b.attr("aria-expanded","true"),Accordions.setChildrenTabIndex()):(Accordions.hide(c),b.attr("aria-expanded","false"),Accordions.unsetChildrenTabIndex()),Accordions.focusedTitle(b)},nextTab:function(a){if(a.id==s.lastTitle.id)var b=s.firstTitle;else var b=a.next("dd").next("dt");b.focus(),Accordions.focusedTitle(a)},previousTab:function(a){try{var b=a.prev("dd").prev("dt")[0];b.focus(),Accordions.focusedTitle(a)}catch(c){if(!(c instanceof TypeError))throw c}},firstTab:function(){s.firstTitle.focus(),Accordions.focusedTitle(s.firstTitle)},lastTab:function(){s.lastTitle.focus(),Accordions.focusedTitle(s.lastTitle)},parentTitle:function(a){var b=a.prev();b.focus(),Accordions.focusedTitle(b)},focusedTitle:function(){var a=$('dt[aria-selected="true"]'),b=$(document.activeElement);b.is("dt")&&(a.attr("aria-selected","false").attr("tabindex","-1"),b.attr("aria-selected","true").attr("tabindex","0"))},setChildrenTabIndex:function(){var a=$('dt[aria-expanded="true"]'),b=a.next();b.children().attr("tabindex","0")},unsetChildrenTabIndex:function(){var a=$('dt[aria-expanded="false"]'),b=a.next();b.children().attr("tabindex","-1")}};Accordions.init();